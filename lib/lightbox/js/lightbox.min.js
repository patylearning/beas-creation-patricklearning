(function (global, factory) {
  if (typeof define === "function" && define.amd) {
      define(["jquery"], factory);
  } else if (typeof exports === "object") {
      module.exports = factory(require("jquery"));
  } else {
      global.lightbox = factory(global.jQuery);
  }
}(this, function ($) {

  function Lightbox(options) {
      this.album = [];
      this.currentImageIndex = undefined;
      this.init();
      this.options = $.extend({}, this.constructor.defaults, options);
  }

  Lightbox.defaults = {
      albumLabel: "Image %1 of %2",
      alwaysShowNavOnTouchDevices: false,
      fadeDuration: 600,
      fitImagesInViewport: true,
      imageFadeDuration: 600,
      positionFromTop: 50,
      resizeDuration: 700,
      showImageNumberLabel: true,
      wrapAround: false,
      disableScrolling: false,
      sanitizeTitle: false
  };

  Lightbox.prototype.option = function (options) {
      $.extend(this.options, options);
  };

  Lightbox.prototype.imageCountLabel = function (current, total) {
      return this.options.albumLabel.replace(/%1/g, current).replace(/%2/g, total);
  };

  Lightbox.prototype.init = function () {
      var self = this;
      $(document).ready(function () {
          self.enable();
          self.build();
      });
  };

  Lightbox.prototype.enable = function () {
      var self = this;
      $("body").on("click", "a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]", function (event) {
          self.start($(event.currentTarget));
          return false;
      });
  };

  Lightbox.prototype.build = function () {
      if ($("#lightbox").length > 0) {
          return;
      }
      
      var self = this;
      $("<div id='lightboxOverlay' class='lightboxOverlay'></div>" +
          "<div id='lightbox' class='lightbox'>" +
          "<div class='lb-outerContainer'><div class='lb-container'>" +
          "<img class='lb-image' src='' />" +
          "<div class='lb-nav'><a class='lb-prev'></a><a class='lb-next'></a></div>" +
          "<div class='lb-loader'><a class='lb-cancel'></a></div>" +
          "</div></div>" +
          "<div class='lb-dataContainer'><div class='lb-data'>" +
          "<div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div>" +
          "<div class='lb-closeContainer'><a class='lb-close'></a></div>" +
          "</div></div></div>")
          .appendTo("body");
      
      this.$lightbox = $("#lightbox");
      this.$overlay = $("#lightboxOverlay");
      this.$image = this.$lightbox.find(".lb-image");
      this.$nav = this.$lightbox.find(".lb-nav");
      
      this.$overlay.hide().on("click", function () { self.end(); });
      this.$lightbox.hide().on("click", function (event) {
          if ($(event.target).attr("id") === "lightbox") self.end();
      });
  };

  Lightbox.prototype.start = function (element) {
      var self = this;
      var $window = $(window);

      this.album = [];
      var imageSet = element.attr("data-lightbox");
      
      if (imageSet) {
          var links = $(element.prop("tagName") + '[data-lightbox="' + imageSet + '"]');
          links.each(function (index, link) {
              self.album.push({
                  alt: $(link).attr("data-alt"),
                  link: $(link).attr("href"),
                  title: $(link).attr("data-title") || $(link).attr("title")
              });
              if (link === element[0]) {
                  self.currentImageIndex = index;
              }
          });
      } else {
          self.album.push({
              alt: element.attr("data-alt"),
              link: element.attr("href"),
              title: element.attr("data-title") || element.attr("title")
          });
          self.currentImageIndex = 0;
      }
      
      var top = $window.scrollTop() + this.options.positionFromTop;
      this.$lightbox.css({ top: top + "px" }).fadeIn(this.options.fadeDuration);
      this.changeImage(this.currentImageIndex);
  };

  Lightbox.prototype.changeImage = function (index) {
      var self = this;
      this.disableKeyboardNav();
      this.$overlay.fadeIn(this.options.fadeDuration);
      
      var image = new Image();
      image.onload = function () {
          self.$image.attr({
              alt: self.album[index].alt,
              src: self.album[index].link
          }).fadeIn(self.options.imageFadeDuration);
      };
      
      image.src = this.album[index].link;
      this.currentImageIndex = index;
  };

  Lightbox.prototype.end = function () {
      this.$lightbox.fadeOut(this.options.fadeDuration);
      this.$overlay.fadeOut(this.options.fadeDuration);
  };

  return new Lightbox();
}));

//# sourceMappingURL=lightbox.min.map